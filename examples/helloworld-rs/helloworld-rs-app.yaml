build:
  uri: https://github.com/jboss-developer/jboss-eap-quickstarts.git
  ref: EAP_7.4.0.GA
  s2i:
    jdk: "11"
    kind: ImageStreamTag
    jdk11:
      builderImage: eap8-openjdk11-builder-openshift-rhel8
      runtimeImage: eap8-openjdk11-runtime-openshift-rhel8
    galleonLayers:
      - jaxrs-server
    featurePacks:
      - org.jboss.eap:wildfly-ee-galleon-pack
      - org.jboss.eap.cloud:eap-cloud-galleon-pack:1.0.0.Alpha3-redhat-00001
    channels:
      - org.jboss.eap.channels:eap-8.0-beta
  images:
    - from:
        kind: ImageStreamTag
        name: eap-maven-repo:latest
      paths:
        - sourcePath: /maven-repository
          destinationDir: ./eap-maven-repo
  env:
  - name: ARTIFACT_DIR
    value: helloworld-rs/target
  - name: MAVEN_ARGS_APPEND
    value: -am -pl helloworld-rs
  - name: MAVEN_OPTS
    value: '-XX:MetaspaceSize=96m -XX:MaxMetaspaceSize=256m'
deploy:
  replicas: 3